<template>
  <require from="../components/displayEvent"></require>
  <h2>Event: ${ev.title}</h2>
  <div class="left episodeform">
    <form role="form" submit.delegate="submit()">
      <div>
        <input type="text" class="form-control"
          placeholder="title" value.bind="ev.title">
        <ul class="error" if.bind="errors.title">
          <li repeat.for="err of errors.title">${err}</li>
        </ul>
      </div>
      <div>
        <input type="text" class="form-control" style="width: 15em"
          placeholder="date (YYYY-MM-DD)" value.bind="ev.happens_on">
        <ul class="error" if.bind="errors.happens_on">
          <li repeat.for="err of errors.happens_on">${err}</li>
        </ul>
      </div>
      <div>
        <textarea rows="5" class="form-control"
          placeholder="description" value.bind="ev.description">
        </textarea>
      </div>
      <div class="event-line-entry-form">
        <h3>Performances</h3>
        <ul>
        <template repeat.for="line of ev.lines">
          <li>
            <div>
              <input type="text" value.bind="line.time" style="width: 8em"
                placeholder="time"
                change.delegate="$parent.addBlank($index, $event)">
            </div>
            <div>
              <input type="text" value.bind="line.artist"
                placeholder="artist"
                change.delegate="$parent.addBlank($index, $event)">
            </div>
            <div>
              <input type="text" value.bind="line.genres"
                placeholder="genre(s)"
                change.delegate="$parent.addBlank($index, $event)">
            </div>
            <div>
              <input type="text" value.bind="line.affiliations"
                placeholder="Affiliation(s)"
                change.delegate="$parent.addBlank($index, $event)">
            </div>
            <div>
              <textarea rows="5" value.bind="line.extra"
                placeholder="Extra"
                change.delegate="$parent.addBlank($index, $event)">
              </textarea>
            </div>
            <div class="remove-widget">
              <a href="" click.delegate="$parent.removeItem($index)">remove</a>
            </div>
          </li>
        </template>
        </ul>
      </div>
      <input type="submit">
    </form>
  </div>
  <div class="right">
    <event-display event.bind="ev"></event-display>
  </div>
  <p class="clearer">&nbsp;</p>
</template>
